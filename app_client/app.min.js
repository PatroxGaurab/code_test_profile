!function(){function e(e,n){e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).when("/register",{templateUrl:"/auth/register/register.view.html",controller:"registerCtrl",controllerAs:"vm"}).when("/login",{templateUrl:"/auth/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/profile",{templateUrl:"/profile/profile.view.html",controller:"profileCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"}),n.html5Mode(!0)}function n(e,n,o){e.$on("$routeChangeStart",function(e,t,r){"/profile"!==n.path()||o.isLoggedIn()||n.path("/")}),e.$on("$routeChangeSuccess",function(n,o){a=o.params,url=Object.keys(a).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])}).join("&"),e.query=url})}angular.module("meanApp",["ngRoute","ngFileUpload"]),angular.module("meanApp").config(["$routeProvider","$locationProvider",e]).run(["$rootScope","$location","authentication",n])}(),function(){function e(e,n){e.getCommitData=function(){IN.API.Profile("me").fields(["id","firstName","lastName","pictureUrl","publicProfileUrl"]).result(function(n){e.$apply(function(){e.jsondata=n.values[0]})}).error(function(n){e.$apply(function(){e.error=n})})}}angular.module("meanApp").controller("homeCtrl",["$scope","$http",e])}(),function(){function e(e,n,o,t,r,i){var a=this;a.user={},o.getProfile(n).success(function(e){a.user=e}).error(function(e){console.log(e)}),t.getCommitData=function(){IN.API.Profile("me").fields(["id","firstName","lastName","pictureUrl","publicProfileUrl","headline","summary","location","positions"]).result(function(e){t.$apply(function(){t.jsondata=e.values[0]})}).error(function(e){t.$apply(function(){t.error=e})})},t.profileNameUpdate=function(){o.updateProfile({updateParam:{name:a.user.name}}).success(function(e){alert(JSON.stringify(e))}).error(function(e){console.log(e)})},t.profileHeadlineUpdate=function(){o.updateProfile({updateParam:{headline:t.jsondata.headline}}).success(function(e){alert(JSON.stringify(e))}).error(function(e){console.log(e)})},t.profileLocationUpdate=function(){o.updateProfile({updateParam:{location:t.jsondata.location.name}}).success(function(e){alert(JSON.stringify(e))}).error(function(e){console.log(e)})},t.profileExperienceUpdate=function(){o.updateProfile({updateParam:{experience:t.jsondata.positions.values}}).success(function(e){alert(JSON.stringify(e))}).error(function(e){console.log(e)})},t.addNewExperience=function(){var e=t.jsondata.positions.values.length+1;t.jsondata.positions.values.push({id:e})},t.removeExperience=function(){var e=t.jsondata.positions.values.length-1;t.jsondata.positions.values.splice(e)},t.uploadPic=function(e){o.uploadImage(e).success(function(e){alert(JSON.stringify(e))}).error(function(e){console.log(e)})}}angular.module("meanApp"),angular.module("meanApp").controller("profileCtrl",e),e.$inject=["$location","$routeParams","meanData","$scope","$http","Upload"]}(),function(){function e(e,n){var o=this;o.credentials={email:"",password:""},o.onSubmit=function(){n.login(o.credentials).error(function(e){alert(e)}).then(function(){e.path("profile")})}}angular.module("meanApp").controller("loginCtrl",e),e.$inject=["$location","authentication"]}(),function(){function e(e,n){var o=this;o.credentials={name:"",email:"",password:""},o.onSubmit=function(){console.log("Submitting registration"),n.register(o.credentials).error(function(e){alert(e)}).then(function(){e.path("profile")})}}angular.module("meanApp").controller("registerCtrl",e),e.$inject=["$location","authentication"]}(),function(){function e(e,n){var o=function(e){n.localStorage["mean-token"]=e},t=function(){return n.localStorage["mean-token"]},r=function(){var e,o=t();return!!o&&(e=o.split(".")[1],e=n.atob(e),e=JSON.parse(e),e.exp>Date.now()/1e3)},i=function(){if(r()){var e=t(),o=e.split(".")[1];return o=n.atob(o),o=JSON.parse(o),{email:o.email,name:o.name}}};return register=function(n){return e.post("/api/register",n).success(function(e){o(e.token)})},login=function(n){return e.post("/api/login",n).success(function(e){o(e.token)})},logout=function(){n.localStorage.removeItem("mean-token")},{currentUser:i,saveToken:o,getToken:t,isLoggedIn:r,register:register,login:login,logout:logout}}angular.module("meanApp").service("authentication",e),e.$inject=["$http","$window"]}(),function(){function e(e,n,o){var t=function(o){return e.get("/api/profile?sso="+o.sso+"&sig="+o.sig,{headers:{Authorization:"Bearer "+n.getToken()}})},r=function(o){return e.post("/api/profile",o,{headers:{Authorization:"Bearer "+n.getToken()}})},i=function(e){e.upload=o.upload({url:"api/upload/profilepic",data:{file:e},headers:{Authorization:"Bearer "+n.getToken()}}),e.upload.then(function(e){$timeout(function(){})},function(e){},function(e){})};return{getProfile:t,updateProfile:r,uploadImage:i}}angular.module("meanApp").service("meanData",e),e.$inject=["$http","authentication","Upload"]}(),function(){function e(e,n){var o=this;o.isLoggedIn=n.isLoggedIn(),o.currentUser=n.currentUser()}angular.module("meanApp").controller("navigationCtrl",e),e.$inject=["$location","authentication"]}(),function(){function e(){return{restrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}angular.module("meanApp").directive("navigation",e)}();
//# sourceMappingURL=app.min.js.map
